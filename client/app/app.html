<template name="app">
{{#if runningSetup}}
	{{> setup}}
{{else}}
	{{#with currentBigNotice}}
		{{> bigNotice}}
	{{/with}}

	<div id="app">
		{{> sidebar}}

		<div id="wrapper">
			{{#unless isDesktop}}
				<div id="mobileHeader" style="border-color: {{pageColor}}">
					<i class="fa fa-bars headerIcon" data-snap-side="left"></i>
					<div id="title">{{pageTitle}}</div>
					<i class="fa fa-users headerIcon" data-snap-side="right"></i>
				</div>
			{{/unless}}
			{{#if has "noAds"}}
				<div class="content unselectable smoothScroll">
					{{> Template.dynamic template=main}}
				</div>
			{{else}}
				{{! TODO: Cleaner way to do this? }}
				<div class="content unselectable smoothScroll" style="bottom: 90px">
					{{> Template.dynamic template=main}}
				</div>
				<div id="adbar"></div>
			{{/if}}
		</div>
		{{> chatSidebar}}

		{{#with chat}}
			{{> fullscreenChatWindow}}
		{{/with}}
	</div>
	<div class="backdrop"></div>
{{/if}}
</template>

<template name="bigNotice">
	<div id="bigNotice" class="{{theme}}">
		<div id="content">
			{{content}}
		</div>
		{{#if allowDismiss}}
			<span id="dismissButton">&times;</span>
		{{/if}}
	</div>
</template>

<template name="getExternalClassesModal">
	<div class="modal fade" aria-hidden="true" id="getExternalClassesModal">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h4 class="modal-title">Vakken</h4>
				</div>
				<div class="modal-body">
					{{#unless externalClasses}}
						<div style="width: 100%; text-align: center; font-size: 16px">
							Vakken aan het ophalen van [meh]...<br>
							<div id="spinner"></div>
						</div>
					{{else}}
						<div>
							We hebben geprobeerd zoveel mogelijk vakken van [meh] automatisch op te halen.<br>
							Verwijder overbodige vakken en wijzig onjuiste informatie, vakken kun je later toevoegen.
						</div>
						<div id="result">
							{{#each externalClasses}}
								<div id="{{_id.toHexString}}">
									<i style="cursor: pointer" class="fa fa-times"></i>
									<span class="input-group-addon"><i></i></span>
									<div id="classTitle">{{name}}</div>
									<input class="form-control" type="text" id="method" placeholder="Methode"/>
								</div>
							{{/each}}
						</div>
					{{/unless}}
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary" id="goButton">verder</button>
				</div>
			</div>
		</div>
	</div>
</template>

<!--
<template name="plannerPrefsModal">
	<div class="modal fade" aria-hidden="true" id="plannerPrefsModal">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
					<h4 class="modal-title">Planner voorkeuren</h4>
				</div>
				<div class="modal-body">
					<h4 style="text-align: center; margin-bottom: 20px;">Hoeveel tijd heb je op elke weekdag?<small><br><i>(schooltijd niet meegerekend)</i><br>Je kan dit altijd in je instellingen aanpassen.</small></h4>
					<form class="vertical full-width">
						{{#each dayWeek}}
							<div id="{{name}}Group" class="group select">
								<label for="{{name}}Input">{{friendlyName}}</label>
								<select id="{{name}}Input">
									{{#each weigthOptions}}
										<option selected={{selected}}>{{name}}</option>
									{{/each}}
								</select>
							</div>
						{{/each}}
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary" id="goButton">Opslaan</button>
				</div>
			</div>
		</div>
	</div>
</template>
-->

<template name="addClassModal">
	<div class="modal fade" aria-hidden="true" id="addClassModal">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
					<h4 class="modal-title">Vak toevoegen</h4>
				</div>
				<div class="modal-body">
					{{#with externalClasses}}
						<h3>Kies een extern vak</h3>
						{{#each this}}
							<div class="classRow">
								<div class="classname">{{name}}</div>
								<input type="text" placeholder="Methode" class="methodInput form-control" />
								<button type="button" class="btn btn-primary">toevoegen</button>
							</div>
						{{/each}}
						<h3>Of maak zelf een vak</h3>
					{{/with}}
					<form class="vertical full-width">
						<div id="nameGroup" class="group">
							<label for="classNameInput">Vaknaam</label>
							<input
								type="text" id="classNameInput" placeholder="Engels"
								spellcheck="off" autocomplete="off"
								data-source="scholierenClasses" data-value-key="name"
							/>
						</div>
						<div id="courseGroup" class="group">
							<label for="courseInput">Vakafkorting</label>
							<input type="text" id="courseInput" placeholder="entl">
						</div>
						<div id="bookGroup" class="group">
							<label for="bookInput">Methode</label>
							<input
								type="text" id="bookInput" placeholder="Solutions"
								spellcheck="off" autocomplete="off"
								data-source="books" data-value-key="title"
							/>
						</div>
						<div id="colorGroup" class="group">
							<label for="colorInput" id="colorLabel">Kleur</label>
							<input type="text" id="colorInput" placeholder="#32A8CE">
						</div>
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Annuleren</button>
					<button type="button" class="btn btn-primary" id="goButton">Toevoegen</button>
				</div>
			</div>
		</div>
	</div>
</template>

<template name="newSchoolYearModal">
	<div class="modal fade" aria-hidden="true" id="newSchoolYearModal">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
					<h4 class="modal-title">Nieuw Schooljaar</h4>
				</div>
				<div class="modal-body">
					<h4 style="text-align: center; margin-bottom: 20px;">Welken vakken moeten er weg?<small><br>Vakken kan je zometeen toevoegen.</small></h4>
					{{#each classes}}
						<div class="classRemoveRow">
							<label>
								<input type="checkbox" classId="{{_id._str}}">
								<span id="checkboxLabel">
									{{name}}
								</span>
							</label>
						</div>
					{{/each}}
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary" id="goButton">Okido</button>
				</div>
			</div>
		</div>
	</div>
</template>

<template name="addProjectModal">
	<div class="modal fade" aria-hidden="true" id="addProjectModal">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
					<h4 class="modal-title">Project aanmaken</h4>
				</div>
				<div class="modal-body">
					{{#with assignments}}
						<h3>Kies een externe opdracht</h3>
						{{#each this}}
							<div class="assignmentRow">
								<div class="className">{{__abbreviation}}</div>
								<div class="assignmentName">{{name}}</div>

								{{#if __project}}
									<button type="button" class="btn btn-default goToProjectButton" id="{{__project._id.toHexString}}">aangemaakt</button>
								{{else}}
									<button type="button" class="btn btn-primary" id="createProjectButton">aanmaken</button>
								{{/if}}
							</div>
						{{/each}}
						<h3>Of maak zelf een project</h3>
					{{/with}}
					<form class="vertical full-width">
						<div id="nameGroup" class="group">
							<label for="nameInput">Naam</label>
							<input type="text" id="nameInput" placeholder="Projectnaam" />
						</div>
						<div id="descriptionGroup" class="group">
							<label for="descriptionInput">Beschrijving</label>
							<input type="text" id="descriptionInput" placeholder="Projectbeschrijving" />
						</div>
						<div id="deadlineGroup" class="group">
							<label for="deadlineInput">Deadline</label>
							<input type="text" id="deadlineInput" />
						</div>
						<div id="classNameGroup" class="group">
							<label for="classNameInput">Vak</label>
							<input
								type="text" id="classNameInput" placeholder="Projectvak"
								spellcheck="off" autocomplete="off"
								data-source="classes" data-value-key="name" data-select="selected"
							/>
						</div>
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Annuleren</button>
					<button type="button" class="btn btn-primary" id="goButton">Aanmaken</button>
				</div>
			</div>
		</div>
	</div>
</template>
