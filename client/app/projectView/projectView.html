<template name="projectView">
	{{> addParticipantModal}}
	{{> changeProjectModal}}

	<div class="container-fluid">
		<div class="row">
			<div class="robotoHeader overviewHeader head1 projectHeader">
				{{name}}
				{{#if isPhone}}
					<span id="changeProjectIcon" class="fa fa-pencil"></span>
				{{else}}
					<span id="changeProjectIcon" class="fa fa-pencil" style="opacity: 0"></span>
				{{/if}}
			</div>
			{{#if showRightHeader}}
				{{#with participants}}
					<div class="robotoHeader overviewHeader head2 projectHeader" style="text-align: right">{{length}} <span class="robotoThin" style="margin-left: 5px">personen</span></div>
				{{/with}}
			{{/if}}
		</div>
		<div class="divider"></div>

		<div class="projectInfoContainer">
			<div class="projectInfoSubContainer">
				<b>Deadline</b>: {{friendlyDeadline}}
				<br>
				<b>Vak</b>: {{__class.name}}
				<br>
				<b>Beschrijving</b>: <span class="projectInfoDescription">{{description}}</span>
			</div>

			<div class="projectInfoChatQuoteContainer">
				<img class="lastChatSenderPicture" src="https://www.gravatar.com/avatar/763664ead00ca1ed8e12db1d5ad703c5?s=75&d=identicon&r=PG" width="50" height="50" style="border-color: {{lastChatMessageSenderColor}}" />
				<span class="robotoThin lastChatSenderName" style="color: {{lastChatMessageSenderColor}}">{{lastChatMessageSenderName}} Lieuwe</span>
				<span class="robotoThin lastChatMessage">{{lastChatMessage}} Ik hou van placeholder</span>
				<span class="robotoThin lastChatHeader">Chat</span>
			</div>
		</div>

		<div class="row">
			<div class="col-sm-6">
				<div class="projectViewItemContainer" style="height: calc(100vh - {{heightOffset}}px)">
					<span class="robotoThin itemContainerHeader">
						<span class="fa fa-plus" id="addFileIcon" onmouseover="$(this).velocity({ opacity: 1 }, 100);" onmouseleave="$(this).velocity({ opacity: .5 }, 100);"></span>
						Bestanden
					</span>
					<div class="itemContainerDivider"></div>
					<div class="itemContainerContent">
						{{#each files}}
							{{> fileRow}}

							{{#unless last files}}
								<div class="itemContainerSmallDivider"></div>
							{{/unless}}
						{{/each}}
					</div>
				</div>
			</div>

			<div class="col-sm-6">
				<div class="projectViewItemContainer" style="height: calc(100vh - {{heightOffset}}px)">
					<span class="robotoThin itemContainerHeader">
						{{#if isOwner}}
							<span class="fa fa-plus" id="addPersonIcon" onmouseover="$(this).velocity({ opacity: 1 }, 100);" onmouseleave="$(this).velocity({ opacity: .5 }, 100);"></span>
						{{/if}}
						Mensen
					</span>
					<div class="itemContainerDivider"></div>
					<div class="itemContainerContent">
						{{#linkTo route="personView" data=currentUser}}
							{{> selfRow}}
						{{/linkTo}}
						{{#if persons}}
							<div class="itemContainerSmallDivider"></div>
							{{#each persons}}
								{{> personRow}}

								{{#unless last persons}}
									<div class="itemContainerSmallDivider"></div>
								{{/unless}}
							{{/each}}
						{{/if}}
					</div>
				</div>
			</div>
		</div>
	</div>
</template>

<template name="fileRow">
	<a href="{{alternateLink}}" target="_blank">
		<div class="fileRow">
			<div class="ripple" style="background-color: {{fileTypeColor}}"></div>
			<div style="position: relative; pointer-events: none"> {{! otherwise the ripple will go over the content}}
				<i class="fa fa-{{fileTypeIconClass}}"></i>
				<span class="projectTitle">{{title}}</span>
				{{#if currentWorker}}
					<span class="fileCurrentPeople"><b>{{currentWorker.profile.firstName}}</b> is nu hiermee bezig</span>
				{{/if}}
				<span class="removeFileButton">&times;</span>
			</div>
		</div>
	</a>
</template>

<template name="personRow">
	<div class="personRow">
		<img src="{{gravatar this 100}}" width="50" height="50" class="personImage" style="border-color: {{__statusColor}}">
		<span class="personName"><span style="color: black">{{profile.firstName}}</span> {{profile.lastName}}</span>
		{{#if __isOwner}}
			<span class="removePersonButton">&times;</span>
		{{/if}}
	</div>
</template>

<template name="selfRow">
	<div class="personRow">
		<img src="{{gravatar currentUser 100}}" width="50" height="50" class="personImage" style="border-color: #2ECC40">
		<span class="personName" style="color: black">Jij</span>
	</div>
</template>

<template name="addParticipantModal">
	<div class="modal fade" id="addParticipantModal">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
					<h4 class="modal-title">Persoon Toevoegen</h4>
				</div>
				<div class="modal-body">
					<form class="form-horizontal">
						<div id="personNameGroup" class="form-group">
							<label for="personNameInput" class="col-sm-2 control-label" style="text-align: left">Naam</label>
							<div class="col-sm-10">
								<input type="text" class="form-control" id="personNameInput" placeholder="Adolf">
							</div>
						</div>
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Annuleren</button>
					<button type="button" class="btn btn-primary" id="goButton">Opslaan</button>
				</div>
			</div>
		</div>
	</div>
</template>

<template name="changeProjectModal">
	<div class="modal fade" id="changeProjectModal">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
					<h4 class="modal-title">Project instellingen</h4>
				</div>
				<div class="modal-body">
					<form class="form-horizontal">
						<div id="changeNameGroup" class="form-group">
							<label for="changeNameInput" class="col-sm-2 control-label" style="text-align: left">Naam</label>
							<div class="col-sm-10">
								<input type="text" class="form-control" id="changeNameInput" value="{{name}}">
							</div>
						</div>
						<div id="changeDescriptionGroup" class="form-group">
							<label for="changeDescriptionInput" class="col-sm-2 control-label" style="text-align: left">Beschrijving</label>
							<div class="col-sm-10">
								<input type="text" class="form-control" id="changeDescriptionInput" value="{{description}}">
							</div>
						</div>
						<div id="changeDeadlineGroup" class="form-group">
							<label for="changeDeadlineInput" class="col-sm-2 control-label" style="text-align: left">Deadline</label>
							<div class="col-sm-10">
								<input type="text" class="form-control" id="changeDeadlineInput">
							</div>
						</div>
						<div id="changeClassGroup" class="form-group">
							<label for="changeClassInput" class="col-sm-2 control-label" style="text-align: left">Vak</label>
							<div class="col-sm-10">
								<input type="text" class="form-control" id="changeClassInput" value="{{__class.name}}">
							</div>
						</div>
					</form>
					<button class="btn btn-danger" id="leaveProjectButton">Verlaat project</button>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Annuleren</button>
					<button type="button" class="btn btn-primary" id="goButton">Opslaan</button>
				</div>
			</div>
		</div>
	</div>
</template>
