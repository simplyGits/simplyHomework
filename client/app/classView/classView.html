<template name="classView">
	{{> changeClassModal}}

	<div class="container-fluid">
		<div class="row" style="margin-top: -10px">
			<div class="robotoHeader overviewHeader" id="classHeader">
				{{name}}
				<span id="changeClassIcon" class="fa fa-pencil"></span>
			</div>
			<div class="robotoHeader overviewHeader" style="position: absolute; top: 0; right: 10px; text-align: right">{{tasksAmount}} <span class="robotoThin" style="margin-left: 5px">{{tasksWord}}</span></div>
		</div>
		<div class="divider" style="border-color: {{classColor}}"></div>
		<div class="gradeInfoContainer">
			{{#if loadingGrades}}
				<div style="width: 100%; text-align: center; opacity: .7; position: absolute; top: 50%; transform: translateY(-50%); word-break: break-word">
					Cijfers laden...
				</div>
			{{else}}
				{{#if hasGrades}}
					{{#with endGrade}}
						{{> endGradeTemplate}}
					{{else}}
						<div class="gradeContainerEndGrade">
							<div class="gradeSquare">?</div>
							<div class="endGradeHint">Gemiddelde</div>
						</div>
					{{/with}}
					<div class="gradeContainer">
						{{#each gradeGroups}}
							{{> gradeGroup}}
						{{/each}}
					</div>
					{{#with selectedGrade}}
						{{> gradeDetail}}
					{{/with}}
				{{else}}
					<div style="width: 100%; text-align: center; opacity: .7; position: absolute; top: 50%; transform: translateY(-50%); word-break: break-word">
						Geen cijfers gevonden.
					</div>
				{{/if}}
			{{/if}}
		</div>
		<div class="row">
			<div class="col-sm-6">
				<div class="itemContainer studyGuides">
					<div class="robotoThin itemContainerHeader">
						Studiewijzers
					</div>
					<div class="itemContainerContent">
						{{#each studyGuides}}
							{{> studyGuide}}
						{{/each}}
					</div>
				</div>
			</div>
			<div class="col-sm-6">
				<div class="itemContainer digitalSchoolUtilities">
					<div class="robotoThin itemContainerHeader">
						Leermiddelen
					</div>
					<div class="itemContainerContent">
						{{#each digitalSchoolUtilities}}
							{{> digitalSchoolUtility}}
						{{/each}}
					</div>
				</div>
			</div>
		</div>
	</div>
</template>

<template name="gradeGroup">
	<div class="gradeGroup">
		<div class="gradeGroupName"><span>{{name}}</span></div><div class="gradeGroupDivider"></div>
		{{#each grades}}
			{{> gradeRow}}
		{{/each}}
	</div>
</template>

<template name="gradeRow">
	<div class="gradeRow {{selected}} {{__insufficient}}">
		<span id="grade">{{grade}}</span> <span id="weight">{{weight}}</span>
	</div>
</template>

<template name="gradeDetail">
	<div class="gradeContainerGradeDetail">
		<div class="gradeSquare {{__insufficient}}">{{grade}}</div>
		<div class="gradeInfoRow"><div>Beschrijving</div> {{description}}</div>
		<div class="gradeInfoRow"><div>Gewicht</div> {{weight}}</div>
	</div>
</template>

<template name="endGradeTemplate">
	<div class="gradeContainerEndGrade {{__insufficient}}">
		<div class="gradeSquare {{__insufficient}}">{{grade}}</div>
		<div class="endGradeHint">Gemiddelde</div>
	</div>
</template>

<template name="studyGuide">
	<div class="studyGuide">
		<div class="studyGuideName">
			<span>{{name}}</span>
		</div>
		{{#each parts}}
			<div class="studyGuidePart">
				{{name}}
				<div class="studyGuidePartDescription">{{description}}</div>
				{{#each _files}}
					<a href="{{url}}" target="_blank">
						<div class="studyGuidePartFile">
							{{name}}
						</div>
					</a>
				{{/each}}
			</div>
		{{/each}}
	</div>
</template>

<template name="digitalSchoolUtility">
	<a href="{{url}}" target="_blank">
		<div class="digitalSchoolUtility">{{name}}</div>
	</a>
</template>

<template name="changeClassModal">
	<div class="modal fade" id="changeClassModal">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
					<h4 class="modal-title">{{name}}</h4>
				</div>
				<div class="modal-body">
					<form class="form-horizontal">
						<div id="changeBookGroup" class="form-group">
							<label for="changeBookInput" class="col-sm-2 control-label" style="text-align: left">Methode</label>
							<div class="col-sm-10">
								<input type="text" class="form-control" id="changeBookInput" value="{{__book.title}}">
							</div>
						</div>
						<div id="changeColorGroup" class="form-group">
							<label for="changeColorInput" id="changeColorLabel" class="col-sm-2 control-label" style="text-align: left">Kleur</label>
							<div class="col-sm-10">
								<input type="text" class="form-control" id="changeColorInput" value="{{__color}}">
							</div>
						</div>
					</form>
					<button class="btn btn-danger" id="deleteClassButton">Verwijder vak</button>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Annuleren</button>
					<button type="button" class="btn btn-primary" id="goButton">Opslaan</button>
				</div>
			</div>
		</div>
	</div>
</template>
